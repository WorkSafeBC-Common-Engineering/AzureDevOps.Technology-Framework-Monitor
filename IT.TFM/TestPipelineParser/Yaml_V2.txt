# --------------------------------------------------------------------------
# WorkSafeBC Multi-Stage Blueprint-Based Pipeline Design Practice
# --------------------------------------------------------------------------
# See https://aka.ms/yaml for Azure DevOps Pipeline documentation
#
# webapp Blueprint
# --------------------------------------------------------------------------
# HOW TO USE
#   - Name file azure-pipeline-__TODO_PORTFOLIO__-__TODO_PRODUCT__-webapp-start.yml
#   - Copy file to 'pipelines/' under the root folder of your repo
#   - Look for TODO and update / fine-tune as needed
#   - In AzureDevOps.Automation.Pipeline.Configuration.v2 repo, configure
#     your associated /deploy/__TODO_PORTFOLIO__-__TODO_PRODUCT__-config.yml
#     configuration file.
# --------------------------------------------------------------------------

trigger:
  batch: true
  branches:
    include:
    - refs/heads/release/*
  paths:
    include:
    - /src
    exclude:
    - /pipelines
    
resources:
  repositories:
  - repository: CeBlueprints
    type:       git
    name:       'Common-Engineering-System/AzureDevOps.Automation.Pipeline.Templates.v2'
  - repository: CeConfiguration
    type:       git
    name:       'Common-Engineering-System/AzureDevOps.Automation.Pipeline.Configuration.v2'

extends:
  template: blueprints/webapp/azure-pipeline-webapp-control.yml@CeBlueprints
  parameters:
    portfolioName:   'common-engineering'
    productName:     'Sample.WebApp.Blazor'
    publishFolder:   'webapp-blazor/src'
    suppressCD:      false